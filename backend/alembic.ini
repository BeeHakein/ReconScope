# =============================================================================
# Alembic Configuration – ReconScope
# =============================================================================
# Documentation: https://alembic.sqlalchemy.org/en/latest/tutorial.html
#
# The ``sqlalchemy.url`` value below is intentionally left blank because the
# async connection string is injected programmatically in ``alembic/env.py``
# from the application settings (``app.config.Settings.DATABASE_URL``).
# =============================================================================

[alembic]
# Path to the migration environment, relative to this file.
script_location = alembic

# Template used to generate migration file names.
# Produces filenames like: 20260223_143000_add_targets_table.py
file_template = %%(year)d%%(month).2d%%(day).2d_%%(hour).2d%%(minute).2d%%(second).2d_%%(slug)s

# Timezone used for ``file_template`` date/time tokens.
timezone = UTC

# Set to 'true' to run the environment during the 'revision' command,
# regardless of autogenerate.
# revision_environment = false

# Maximum length of characters to apply to the "slug" field.
truncate_slug_length = 40

# Set to true to emit SQL to the database rather than executing it.
# Helpful for generating offline migration scripts.
# sqlalchemy.url is intentionally empty; env.py reads from app settings.
sqlalchemy.url =

# Prepend sys.path entries so that the ``app`` package can be imported.
prepend_sys_path = .

# Version path separator; use "os" for OS-specific, or specify a character.
version_path_separator = os

# Output encoding for script files.
output_encoding = utf-8


# ── Logging ──────────────────────────────────────────────────────────────────

[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console
qualname =

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s
datefmt = %H:%M:%S
